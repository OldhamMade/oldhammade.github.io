<!DOCTYPE html>
<!--[if lt IE 7 ]> <html class="ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie9" lang="en"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en"> <!--<![endif]-->
  <head>
	<title>Using Travis-CI with submodules - Oldham-Made: python/php/nodejs/xquery development</title>

    <meta charset="utf-8" />

    <meta http-equiv="imagetoolbar" content="no"/>
    <meta name="viewport" content="initial-scale=1.0, width=device-width, maximum-scale=1.0" />
    <meta name="robots" content="index,follow"/>
    <meta name="author" content="Oldham-Made" />
    <meta name="language" content="english" />

    <meta name="description" content="Contract/freelance Python, XSL/XQuery, and NodeJS development and consultancy." />
    <meta name="keywords" content="contract development, web consultancy, web developer, php developer, python developer, xquery developer, nodejs developer, xsl developer" />

    <link rel="canonical" href="http://oldham-made.net/" />

    <!--[if lt IE 9]>
        <script src="/js/html5.js"></script>
        <![endif]-->
	<link rel="stylesheet" href="http://fast.fonts.net/cssapi/bdf47b5b-d16e-4862-aa49-8d2224a2416b.css" />
	<link rel="stylesheet" href="http://highlightjs.org/static/styles/foundation.css" />
	<link rel="stylesheet" href="/webfonts/ss-social-circle.css" type="text/css" />
    <link rel="stylesheet" href="/css/compiled.css" />

    <script src="//yandex.st/highlightjs/8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

  </head>
  <body>

    <div class="header">
      <h1><a href="/">OLDHAM<span>MADE</span></a></h1>
      <p>Python, XSL/XQuery, NodeJS development and consultancy.</p>
    </div>

    <div class="social">
      <p>
      	<a href="mailto:info@oldham-made.net" title="Email" class="ss-icon email">Email</a>
      	<a href="http://twitter.com/OldhamMade" title="Twitter" class="ss-icon twitter">Twitter</a>
      	<a href="http://github.com/OldhamMade" title="Github" class="ss-icon octocat">Octocat</a>
      </p>
    </div>

    <div class="contents"><h2>Using Travis-CI with submodules</h2>
<p class="meta">January 10, 2013</p>
<ul class="taglist">
  
  <li><a href="/tags.html#continuous-integration">continuous-integration</a></li>
  
  <li><a href="/tags.html#git">git</a></li>
  
</ul>

<div class="page">
  <h3 id="update">Update:</h3>

<p>This issue seems to have been somewhat fixed; you can now ignore all submodules by setting the following in your <code>.travis.yml</code> file:</p>

<pre><code>git:
    submodules: false</code></pre>

<p>You may still experience problems if you rely on some public submodules but want to ignore others. Hopefully, the developers will enhance this feature allowing us to list which submodules we want to include/skip.</p>

<h3 id="original_issue">Original Issue</h3>

<p>I recently started using <a href="http://travis-ci.org">travis-ci</a> for continuous integration testing with my various projects (mainly <a href="https://github.com/OldhamMade/FWRD">FWRD</a>). Now it’s working, I’m really happy with the results; having the highlighted output generated by my spec config shown in the output is a nice touch.</p>

<p>However, it was initially a pain to use. Firstly, there was no documentation on how to use it with my preferred Python sandboxing system, zc.buildout. Secondly, once I had the config correct, I got a weird error from the build:</p>

<pre><code>Using worker: ruby4.worker.travis-ci.org:travis-ruby-3
$ cd ~/builds
$ git clone --depth=100 --quiet git://github.com/OldhamMAde/FWRD.git OldhamMade/FWRD
$ cd OldhamMade/FWRD
$ git checkout -qf 84315504720c010cb6c92b352c9833739403368e
$ git submodule init
Submodule &#39;docs/build&#39; (git@github.com:OldhamMade/FWRD.git) registered for path &#39;docs/build&#39;
$ git submodule update
Cloning into docs/build...
Warning: Permanently added &#39;github.com,201.10.10.201&#39; (RSA) to the list of known hosts.
Permission denied (publickey).
fatal: The remote end hung up unexpectedly
Clone of &#39;git@github.com:OldhamMade/FWRD.git&#39; into submodule path &#39;docs/build&#39; failed
Done. Build script exited with: 1</code></pre>

<p>A little help from the guys in the IRC channel led me to the fact that travis-ci cannot download a submodule that isn’t on a public url (<code>git://</code>, <code>https://</code>). This causes a problem for me, since I manage my docs using a zc.buildout script and the submodule I set-up points to the <code>gh-pages</code> branch in the repository.</p>

<p>The only way to get this to work for both instances is to change the url for the submodule from <code>git@github.com:user/repo.git</code> to <code>https://user@github.com/user/repo.git</code> - which will work fine with travis but will require you to enter your github password if you wish to update/commit your submodule.</p>
</div>

<div class="signature">
  <p>Written by Phillip Oldham, owner of Oldham-Made Ltd</p>
  <p>&#169; 2013</p>
</div>
</div>

	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	  ga('create', 'UA-43809303-1', 'oldham-made.net');
	  ga('send', 'pageview');
	</script>
  </body>
</html>
